<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProVita</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


</head>
<body>

<header id="home" class="header">
    <nav class="nav" role="navigation">
        <div class="container nav-elements">
            <div class="branding">
                <a href="/"><img src='static/images/provita_logo.png'
                                 alt="Logo - ProVita" width="100" height="100"></a>

            </div>
            <div class="navbar">
                {% if current_user.is_authenticated %}
                <a class="nav-item nav-link" id="homepage" href="/"> Homepage</a>
                <a class="nav-item nav-link" id="profile" href="/profile">My Profile</a>
                <a class="nav-item nav-link" href="/orders" id="orders">My Orders</a>
                <a class="nav-item nav-link" id="search" href="/search">Shop</a>
                <a class="nav-item nav-link" id="logout" href="/logout">Logout</a>
                <a class="nav-item nav-link" id="admin" href="/admin">Admin Only</a>
                {% else %}
                <a class="nav-item nav-link" id="login" href="/login">Login</a>
                <a class="nav-item nav-link" id="signup" href="/signup">Sign Up</a>
                <a href="https://www.linkedin.com/provita?_l=en_US">LinkedIn</a>
                {% endif %}
            </div>
        </div>
    </nav>
</header>

<section id="checkout" class="section">
    <header class="imageheader"></header>
    <div class="container">
        <h2 class="headline">Checkout</h2>

        <table>
            <thead>
            <tr>
                <th>Product</th>
                <th>Image</th>
                <th>Quantity</th>
                <th>Price €</th>
                <th>Total €</th>
                <th></th>

            </tr>
            </thead>
            <tbody>
            <tr>
            <!--Encoding data output: By adding the '|e' to escape the user created values. -->
            <!--This way the user inputs will be considered text by the browser-->
                <td id= "product_name" value="{{ product_name|e }}">{{ product_name|e }}</td>
                <td id= "image"><img src="{{ image }}" alt="{{ image }}" width="150"></td>
                <td id= "quantity">{{ quantity|e }}</td>
                <td id= "price">{{ price|e }}</td>
                <td>
                    <script>
                         document.write({{ quantity }} * {{ price }})
                    </script>
                </td>
                <td>
                    <form action="/completeOrder" method="POST">
                        <input type="hidden" name="product_name" value={{ product_name|e }}>
                        <input type="hidden" name="image" value={{ image|e }}>
                        <input type="hidden" name="quantity" value={{ quantity|e }}>
                        <input type="hidden" name="price" value={{ price|e }}>
                        <button type="submit">Complete order</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

<div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto content">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category  }} mt-3 alert-dismissible" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick=delete_flash(this)>
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        </div>
      </div>
    </div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h3>About ProVita</h3>
                <p>ProVita provides high-quality healthy products for active lifestyles. Our products are made with
                    natural ingredients and are designed to help you stay fit and healthy.</p>
            </div>
        </div>
    </div>
    <div class="bottom-bar">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <small>&copy; 2023 ProVita. All Rights Reserved.</small>
                </div>
            </div>
        </div>
    </div>

</footer>


</body>
</html>